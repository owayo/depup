<p align="center">
  <img src="docs/images/app.png" width="128" alt="depup">
</p>

<h1 align="center">depup</h1>

<p align="center">
  ãƒãƒ«ãƒè¨€èªä¾å­˜é–¢ä¿‚ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆCLIãƒ„ãƒ¼ãƒ«
</p>

<p align="center">
  <a href="README.md">English</a>
</p>

---

## ç‰¹å¾´

- **ãƒãƒ«ãƒè¨€èªå¯¾å¿œ**: Node.js, Python, Rust, Go
- **ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆæ›´æ–°**: ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³æŒ‡å®šã‚’ç›´æ¥æ›´æ–°
- **ã‚¹ãƒãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å‡¦ç†**: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¯„å›²å½¢å¼ï¼ˆ^, ~, >=ï¼‰ã‚’ç¶­æŒ
- **å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¤œå‡º**: æ„å›³çš„ã«å›ºå®šã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¹ã‚­ãƒƒãƒ—
- **ã‚¨ã‚¤ã‚¸ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: Næ—¥/é€±å‰ä»¥é™ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ã«æ›´æ–°
- **pnpmé€£æº**: pnpmè¨­å®šã® `minimumReleaseAge` ã‚’è‡ªå‹•é©ç”¨
- **ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ**: pnpmãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¨Tauriãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- **ãƒªãƒªãƒ¼ã‚¹æ—¥è¡¨ç¤º**: å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒªãƒªãƒ¼ã‚¹æ—¥æ™‚ã‚’è¡¨ç¤º
- **è¤‡æ•°å‡ºåŠ›å½¢å¼**: ãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚«ãƒ©ãƒ¼ï¼‰ã€JSONã€diff

## å¯¾å¿œè¨€èª

| è¨€èª | ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ | ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ« |
|------|-------------|---------------|
| Node.js | package.json | package-lock.json, pnpm-lock.yaml, yarn.lock |
| Python | pyproject.toml | uv.lock, poetry.lock |
| Rust | Cargo.toml | Cargo.lock |
| Go | go.mod | go.sum |

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ã‚½ãƒ¼ã‚¹ã‹ã‚‰

```bash
git clone https://github.com/owayo/depup.git
cd depup
cargo install --path .
```

### Cargoã‚’ä½¿ç”¨

```bash
cargo install depup
```

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```bash
# å…¨ã¦ã®ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°ï¼ˆãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³ï¼‰
depup -n

# Node.jsã®ä¾å­˜é–¢ä¿‚ã®ã¿æ›´æ–°
depup --node

# ã‚¨ã‚¤ã‚¸ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»˜ãã§æ›´æ–°ï¼ˆ2é€±é–“ä»¥ä¸Šï¼‰
depup --age 2w

# diffã‚’è¡¨ç¤ºã—ã¦æ›´æ–°
depup --diff
```

## ä½¿ã„æ–¹

### åŸºæœ¬æ§‹æ–‡

```bash
depup [OPTIONS] [PATH]
```

### ã‚ªãƒ—ã‚·ãƒ§ãƒ³

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | çŸ­ç¸®å½¢ | èª¬æ˜ |
|-----------|-------|------|
| `--dry-run` | `-n` | å¤‰æ›´ã›ãšã«æ›´æ–°å†…å®¹ã‚’è¡¨ç¤º |
| `--verbose` | | è©³ç´°å‡ºåŠ›ã‚’æœ‰åŠ¹åŒ– |
| `--quiet` | `-q` | æœ€å°é™ã®å‡ºåŠ› |
| `--node` | | Node.jsã®ä¾å­˜é–¢ä¿‚ã®ã¿æ›´æ–° |
| `--python` | | Pythonã®ä¾å­˜é–¢ä¿‚ã®ã¿æ›´æ–° |
| `--rust` | | Rustã®ä¾å­˜é–¢ä¿‚ã®ã¿æ›´æ–° |
| `--go` | | Goã®ä¾å­˜é–¢ä¿‚ã®ã¿æ›´æ–° |
| `--exclude <PKG>` | | ç‰¹å®šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’é™¤å¤–ï¼ˆè¤‡æ•°æŒ‡å®šå¯ï¼‰ |
| `--only <PKG>` | | ç‰¹å®šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿æ›´æ–°ï¼ˆè¤‡æ•°æŒ‡å®šå¯ï¼‰ |
| `--include-pinned` | | å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚æ›´æ–°å¯¾è±¡ã«å«ã‚ã‚‹ |
| `--age <DURATION>` | | æœ€å°ãƒªãƒªãƒ¼ã‚¹çµŒéæœŸé–“ï¼ˆä¾‹: 2w, 10d, 1mï¼‰ |
| `--json` | | JSONå½¢å¼ã§å‡ºåŠ› |
| `--diff` | | diffå½¢å¼ã§å¤‰æ›´ã‚’è¡¨ç¤º |
| `--install` | | æ›´æ–°å¾Œã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã®installã‚’å®Ÿè¡Œ |
| `--version` | `-v` | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¡¨ç¤º |
| `--help` | `-h` | ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º |

### ä½¿ç”¨ä¾‹

```bash
# å…¨ã¦ã®æ›´æ–°ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
depup -n

# lodashã¨typescriptã®ã¿æ›´æ–°
depup --only lodash --only typescript

# reactã‚’æ›´æ–°ã‹ã‚‰é™¤å¤–
depup --exclude react

# 2é€±é–“ä»¥ä¸ŠçµŒéã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿æ›´æ–°
depup --age 2w

# Pythonã¨Rustã®ã¿æ›´æ–°
depup --python --rust

# CI/CDç”¨ã«JSONå‡ºåŠ›
depup --json

# æ›´æ–°å¾Œã«npm installã‚’å®Ÿè¡Œ
depup --node --install
```

## ãƒãƒ¼ã‚¸ãƒ§ãƒ³å‡¦ç†

### å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é™¤å¤–ï¼‰

å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æ„å›³çš„ã«å›ºå®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ›´æ–°ã‹ã‚‰é™¤å¤–ã•ã‚Œã¾ã™ï¼š

| è¨€èª | å›ºå®šã®ä¾‹ | æ›´æ–° |
|------|---------|------|
| Node.js | `"1.2.3"` | âŒ |
| Node.js | `"^1.2.3"`, `"~1.2.3"` | âœ… |
| Python | `"==1.2.3"` | âŒ |
| Python | `">=1.2.3"`, `"^1.2.3"` | âœ… |
| Rust | `"=1.2.3"` | âŒ |
| Rust | `"1.2.3"`, `"^1.2.3"` | âœ… |
| Go | `// pinned` ã‚³ãƒ¡ãƒ³ãƒˆ | âŒ |

`--include-pinned` ã§å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚‚æ›´æ–°å¯¾è±¡ã«ã§ãã¾ã™ã€‚

### ç¯„å›²å½¢å¼ã®ç¶­æŒ

depupã¯å…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¯„å›²å½¢å¼ã‚’ç¶­æŒã—ã¾ã™ï¼š

```
"^1.2.3" â†’ "^2.0.0"  ï¼ˆã‚­ãƒ£ãƒ¬ãƒƒãƒˆç¶­æŒï¼‰
"~1.2.3" â†’ "~1.3.0"  ï¼ˆãƒãƒ«ãƒ€ç¶­æŒï¼‰
">=1.0.0" â†’ ">=2.0.0" ï¼ˆç¯„å›²ç¶­æŒï¼‰
```

## ã‚¨ã‚¤ã‚¸ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

`--age` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ã€ä¸€å®šæœŸé–“ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ã«æ›´æ–°ã™ã‚‹ã“ã¨ã§å®‰å®šæ€§ã‚’ç¢ºä¿ã—ã¾ã™ï¼š

```bash
# 2é€±é–“ä»¥ä¸ŠçµŒéã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ã«æ›´æ–°
depup --age 2w

# 10æ—¥ä»¥ä¸ŠçµŒéã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ã«æ›´æ–°
depup --age 10d

# 1ãƒ¶æœˆä»¥ä¸ŠçµŒéã—ãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ã«æ›´æ–°
depup --age 1m
```

### pnpmé€£æº

depupã¯pnpmè¨­å®šã‹ã‚‰ `minimumReleaseAge` ã‚’è‡ªå‹•çš„ã«èª­ã¿å–ã‚Šã¾ã™ï¼š

**å„ªå…ˆé †ä½ï¼š**
1. CLI `--age` ãƒ•ãƒ©ã‚°ï¼ˆæœ€å„ªå…ˆï¼‰
2. `.npmrc`ï¼ˆ`minimum-release-age=10d`ï¼‰
3. `pnpm-workspace.yaml`ï¼ˆ`minimumReleaseAge: 14400` åˆ†å˜ä½ï¼‰
4. `package.json`ï¼ˆ`pnpm.settings.minimumReleaseAge`ï¼‰

## å‡ºåŠ›

### ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

```
ğŸ“¦ package.json

  lodash      4.17.20 -> 4.17.21 [patch] (2024/12/15 10:30)
  typescript  5.3.0   -> 5.4.0   [minor] (2024/12/20 14:00) ğŸ”§

Summary: 2 package(s) updated
```

- `ğŸ”§` ã¯devDependenciesã‚’ç¤ºã—ã¾ã™
- ãƒªãƒªãƒ¼ã‚¹æ—¥ã¯ `(yyyy/mm/dd HH:MM)` å½¢å¼ã§è¡¨ç¤º

### JSONå‡ºåŠ›

```bash
depup --json
```

```json
{
  "manifests": [
    {
      "path": "package.json",
      "language": "node",
      "updates": [
        {
          "type": "update",
          "dependency": {
            "name": "lodash",
            "version_spec": "^4.17.20"
          },
          "new_version": "4.17.21",
          "released_at": "2024-12-15T10:30:00Z"
        }
      ]
    }
  ]
}
```

### Diffå‡ºåŠ›

```bash
depup --diff
```

```diff
--- package.json
+++ package.json
@@ dependencies @@
-  "lodash": "^4.17.20"
+  "lodash": "^4.17.21"
```

## ãƒ¢ãƒãƒ¬ãƒå¯¾å¿œ

### pnpmãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

depupã¯ `pnpm-workspace.yaml` ã‚’æ¤œå‡ºã—ã€å…¨ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã¾ã™ã€‚

### Tauriãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

depupã¯Tauriãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® `src-tauri/Cargo.toml` ã‚’è‡ªå‹•æ¤œå‡ºã—ã¾ã™ã€‚

## ãƒ“ãƒ«ãƒ‰

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
cargo build

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
cargo build --release

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
cargo test

# ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cargo install --path .
```

## ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ

ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼ãŠæ°—è»½ã«ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãŠé€ã‚Šãã ã•ã„ã€‚

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

[MIT](LICENSE)
